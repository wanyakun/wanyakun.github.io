(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{588:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("最近前端项目中有一些公用的组件在多个项目中使用，这些组件目前是在单独的仓库中进行开发和维护，但还并没有发布到是有的npm库中，所以暂时使用git的submodule来引入管理。"),t("br"),s._v("\n在Git 中你可以用子模块submodule来管理这些项目，submodule允许你将一个Git 仓库当作另外一个Git 仓库的子目录。这允许你克隆另外一个仓库到你的项目中并且保持你的提交相对独立。")]),s._v(" "),t("h2",{attrs:{id:"子模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#子模块"}},[s._v("#")]),s._v(" 子模块")]),s._v(" "),t("h3",{attrs:{id:"添加"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加"}},[s._v("#")]),s._v(" 添加")]),s._v(" "),t("p",[s._v("比如将远程项目：https://github.com/wanyakun/yk-component-admin.git 克隆到本地的yk-component-admin文件夹中")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" submodule "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" https://github.com/wanyakun/yk-component-admin.git yk-component-admin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("查看状态")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status\nOn branch master\nYour branch is up to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" with "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'origin/master'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\nChanges to be committed:\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git restore --staged <file>..."')]),s._v(" to unstage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tnew file:   .gitmodules\n\tnew file:   yk-component-admin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("可以看到目录下有增加一个文件.gitmodules，用来保存子模块信息，内容为：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" .gitmodules \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("submodule "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yk-component-admin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tpath "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" yk-component-admin\n\turl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" https://github.com/wanyakun/yk-component-admin.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"查看"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看"}},[s._v("#")]),s._v(" 查看")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" submodule\n e39d10b1627318681df87888a6ca57c160ad2a3d yk-component-admin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("heads/master"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更新"}},[s._v("#")]),s._v(" 更新")]),s._v(" "),t("ul",[t("li",[s._v("更新项目内子模块到最新版本")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" submodule update\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("更新子模块为远程项目的最新版本")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" submodule upate --remote\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改"}},[s._v("#")]),s._v(" 修改")]),s._v(" "),t("p",[s._v("在子模块中修改内容后，可以直接提交到远程目录分支。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commit message"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin master\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"删除"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除"}},[s._v("#")]),s._v(" 删除")]),s._v(" "),t("p",[s._v("删除子模块比较麻烦，步骤如下：")]),s._v(" "),t("ol",[t("li",[t("code",[s._v("rm -rf 子模块目录")]),s._v(" 删除子模块目录及内容")]),s._v(" "),t("li",[t("code",[s._v("vim .gitmodules")]),s._v(" 删除项目目录下.gitmodules文件中子模块相关条目")]),s._v(" "),t("li",[t("code",[s._v("vim .git/config")]),s._v(" 删除配置项中子模块相关条目")]),s._v(" "),t("li",[t("code",[s._v("rm .git/module/*")]),s._v(" 删除模块下的子模块目录，每个子模块对应一个目录，注意只删除对应的子模块目录即可")]),s._v(" "),t("li",[t("code",[s._v("git rm --cached 子模块名称")])])]),s._v(" "),t("h2",{attrs:{id:"克隆"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#克隆"}},[s._v("#")]),s._v(" 克隆")]),s._v(" "),t("p",[s._v("克隆包含子模块的项目有二种方法：一种是直接递归克隆整个项目， 一种是先克隆父项目，再更新子模块。")]),s._v(" "),t("h3",{attrs:{id:"递归克隆"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#递归克隆"}},[s._v("#")]),s._v(" 递归克隆")]),s._v(" "),t("p",[s._v("克隆主项目时直接克隆子模块，一步到位")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/wanyakun/yk-mplatform-web.git --recursive \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"先克隆父项目-再更新子模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#先克隆父项目-再更新子模块"}},[s._v("#")]),s._v(" 先克隆父项目，再更新子模块")]),s._v(" "),t("ol",[t("li",[s._v("克隆主项目")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/wanyakun/yk-mplatform-web.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("查看子模块")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" submodule\n-e39d10b1627318681df87888a6ca57c160ad2a3d yk-component-admin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("子模块前面有一个-，说明子模块文件还未检入（空文件夹）。")]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("初始化子模块")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" submodule init\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("更新子模块")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" submodule update\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);