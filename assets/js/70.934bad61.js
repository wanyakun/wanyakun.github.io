(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{578:function(t,e,n){"use strict";n.r(e);var a=n(4),o=function(t){t.options.__data__block__={flowchart_64a567f0:"st=>start: 浏览器请求\nop1=>operation: 有缓存\nop2=>operation: 从缓存获取\nop3=>operation: 向web服务器请求\n带If-None-Match\nop4=>operation: 向web服务器请求\n带If-Modified-Since\nop5=>operation: 向web服务器请求\nop6=>operation: 请求响应，缓存协商\nop7=>operation: 从缓存读取\ncond1=>condition: 是否过期\ncond2=>condition: Etag?\ncond3=>condition: Last-Modified?\ncond4=>condition: 200 or 304?\ne=>end: 呈现\n\nst->op1->cond1\ncond1(yes, bottom)->cond2\ncond1(no, left)->op2(bottom)->e\ncond2(yes, right)->op3(bottom)->cond4\ncond2(no, bottom)->cond3\ncond3(yes, right)->op4(bottom)->cond4\ncond3(no, bottom)->op5(bottom)->op6(bottom)->e\ncond4(yes@304, bottom)->op7(bottom)->e\ncond4(no@200, left)->op6"}},s=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"是什么"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#是什么"}},[t._v("#")]),t._v(" 是什么")]),t._v(" "),n("p",[t._v("HTTP头字段（HTTP header fields）,是指在超文本传输协议（HTTP）的请求和响应消息中的消息头部分"),n("br"),t._v("\n它们定义了一个超文本传输协议事务中的操作参数"),n("br"),t._v("\nHTTP头部字段可以自己根据需要定义，因此可能在 Web服务器和浏览器上发现非标准的头字段"),n("br"),t._v("\n下面是一个HTTP请求的请求头：")]),t._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("GET /home.html HTTP/1.1\nHost: developer.mozilla.org\nUser-Agent: Mozilla/5.0 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Macintosh"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Intel Mac OS X "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" rv:50.0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Gecko/20100101 Firefox/50.0\nAccept: text/html,application/xhtml+xml,application/xml"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("q")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.9")]),t._v(",*/*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("q")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.8")]),t._v("\nAccept-Language: en-US,en"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("q")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),t._v("\nAccept-Encoding: gzip, deflate, br\nReferer: https://developer.mozilla.org/testpage.html\nConnection: keep-alive\nUpgrade-Insecure-Requests: "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nIf-Modified-Since: Mon, "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" Jul "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2016")]),t._v(" 02:36:04 GMT\nIf-None-Match: "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c561c68d0ba92bbeb8b0fff2a9199f722e3a621a"')]),t._v("\nCache-Control: max-age"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("h2",{attrs:{id:"常见字段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常见字段"}},[t._v("#")]),t._v(" 常见字段")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("字段名")]),t._v(" "),n("th",[t._v("说明")]),t._v(" "),n("th",[t._v("示例")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("Accept")]),t._v(" "),n("td",[t._v("能够接受的回应内容类型（Content-Types）")]),t._v(" "),n("td",[t._v("Accept: text/plain")])]),t._v(" "),n("tr",[n("td",[t._v("Accept-Charset")]),t._v(" "),n("td",[t._v("能够接受的字符集")]),t._v(" "),n("td",[t._v("Accept-Charset: utf-8")])]),t._v(" "),n("tr",[n("td",[t._v("Accept-Encoding")]),t._v(" "),n("td",[t._v("能够接受的编码方式列表")]),t._v(" "),n("td",[t._v("Accept-Encoding: gzip, deflate")])]),t._v(" "),n("tr",[n("td",[t._v("Accept-Language")]),t._v(" "),n("td",[t._v("能够接受的回应内容的自然语言列表")]),t._v(" "),n("td",[t._v("Accept-Language: en-US")])]),t._v(" "),n("tr",[n("td",[t._v("Authorization")]),t._v(" "),n("td",[t._v("用于超文本传输协议的认证的认证信息")]),t._v(" "),n("td",[t._v("Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==")])]),t._v(" "),n("tr",[n("td",[t._v("Cache-Control")]),t._v(" "),n("td",[t._v("用来指定在这次的请求/响应链中的所有缓存机制 都必须 遵守的指令")]),t._v(" "),n("td",[t._v("Cache-Control: no-cache")])]),t._v(" "),n("tr",[n("td",[t._v("Connection")]),t._v(" "),n("td",[t._v("该浏览器想要优先使用的连接类型")]),t._v(" "),n("td",[t._v("Connection: keep-alive Connection: Upgrade")])]),t._v(" "),n("tr",[n("td",[t._v("Cookie")]),t._v(" "),n("td",[t._v("服务器通过 Set- Cookie （下文详述）发送的一个 超文本传输协议Cookie")]),t._v(" "),n("td",[t._v("Cookie: $Version=1; Skin=new;")])]),t._v(" "),n("tr",[n("td",[t._v("Content-Length")]),t._v(" "),n("td",[t._v("以 八位字节数组 （8位的字节）表示的请求体的长度")]),t._v(" "),n("td",[t._v("Content-Length: 348")])]),t._v(" "),n("tr",[n("td",[t._v("Content-Type")]),t._v(" "),n("td",[t._v("请求体的 多媒体类型")]),t._v(" "),n("td",[t._v("Content-Type: application/x-www-form-urlencoded")])]),t._v(" "),n("tr",[n("td",[t._v("Date")]),t._v(" "),n("td",[t._v("发送该消息的日期和时间")]),t._v(" "),n("td",[t._v("Date: Tue, 15 Nov 1994 08:12:31 GMT")])]),t._v(" "),n("tr",[n("td",[t._v("Expect")]),t._v(" "),n("td",[t._v("表明客户端要求服务器做出特定的行为")]),t._v(" "),n("td",[t._v("Expect: 100-continue")])]),t._v(" "),n("tr",[n("td",[t._v("Host")]),t._v(" "),n("td",[t._v("服务器的域名(用于虚拟主机 )，以及服务器所监听的传输控制协议端口号")]),t._v(" "),n("td",[t._v("Host: en.wikipedia.org:80 Host: en.wikipedia.org")])]),t._v(" "),n("tr",[n("td",[t._v("If-Match")]),t._v(" "),n("td",[t._v("仅当客户端提供的实体与服务器上对应的实体相匹配时，才进行对应的操作。主要作用时，用作像 PUT 这样的方法中，仅当从用户上次更新某个资源以来，该资源未被修改的情况下，才更新该资源")]),t._v(" "),n("td",[t._v('If-Match: "737060cd8c284d8af7ad3082f209582d"')])]),t._v(" "),n("tr",[n("td",[t._v("If-Modified-Since")]),t._v(" "),n("td",[t._v("允许在对应的内容未被修改的情况下返回304未修改")]),t._v(" "),n("td",[t._v("If-Modified-Since: Sat, 29 Oct 1994 19:43:31 GMT")])]),t._v(" "),n("tr",[n("td",[t._v("If-None-Match")]),t._v(" "),n("td",[t._v("允许在对应的内容未被修改的情况下返回304未修改")]),t._v(" "),n("td",[t._v('If-None-Match: "737060cd8c284d8af7ad3082f209582d"')])]),t._v(" "),n("tr",[n("td",[t._v("If-Range")]),t._v(" "),n("td",[t._v("如果该实体未被修改过，则向我发送我所缺少的那一个或多个部分；否则，发送整个新的实体")]),t._v(" "),n("td",[t._v('If-Range: "737060cd8c284d8af7ad3082f209582d"')])]),t._v(" "),n("tr",[n("td",[t._v("Range")]),t._v(" "),n("td",[t._v("仅请求某个实体的一部分")]),t._v(" "),n("td",[t._v("Range: bytes=500-999")])]),t._v(" "),n("tr",[n("td",[t._v("User-Agent")]),t._v(" "),n("td",[t._v("浏览器的浏览器身份标识字符串")]),t._v(" "),n("td",[t._v("User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:12.0) Gecko/20100101 Firefox/21.0")])]),t._v(" "),n("tr",[n("td",[t._v("Origin")]),t._v(" "),n("td",[t._v("发起一个针对 跨来源资源共享 的请求")]),t._v(" "),n("td",[t._v("Origin: http://www.example-social-network.com")])])])]),t._v(" "),n("h2",{attrs:{id:"使用场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[t._v("#")]),t._v(" 使用场景")]),t._v(" "),n("p",[t._v("通过配合请求头和响应头，可以满足一些场景的功能实现")]),t._v(" "),n("h3",{attrs:{id:"协商缓存"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#协商缓存"}},[t._v("#")]),t._v(" 协商缓存")]),t._v(" "),n("p",[t._v("协商缓存是利用的是"),n("code",[t._v("【Last-Modified，If-Modified-Since】")]),t._v("和"),n("code",[t._v("【ETag、If-None-Match】")]),t._v("这两对请求头响应头来管理的")]),t._v(" "),n("p",[t._v("Last-Modified 表示本地文件最后修改日期，浏览器会在request header加上If-Modified-Since（上次返回的Last-Modified的值），询问服务器在该日期后资源是否有更新，有更新的话就会将新的资源发送回来"),n("br"),t._v("\nEtag就像一个指纹，资源变化都会导致ETag变化，跟最后修改时间没有关系，ETag可以保证每一个资源是唯一的"),n("br"),t._v("\nIf-None-Match的header会将上次返回的Etag发送给服务器，询问该资源的Etag是否有更新，有变动就会发送新的资源回来"),n("br"),t._v("\n而强制缓存不需要发送请求到服务端，根据请求头expires和cache-control判断是否命中强缓存"),n("br"),t._v("\n强制缓存与协商缓存的流程图如下:")]),t._v(" "),n("FlowChart",{attrs:{id:"flowchart_64a567f0",code:t.$dataBlock.flowchart_64a567f0,preset:"vue"}}),n("h3",{attrs:{id:"会话状态"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#会话状态"}},[t._v("#")]),t._v(" 会话状态")]),t._v(" "),n("p",[t._v("Cookie，类型为「小型文本文件」，指某些网站为了辨别用户身份而储存在用户本地终端上的数据，通过响应头set-cookie决定"),n("br"),t._v("\n作为一段一般不超过 4KB 的小型文本数据，它由一个名称（Name）、一个值（Value）和其它几个用于控制 Cookie有效期、安全性、使用范围的可选属性组成"),n("br"),t._v("\nCookie 主要用于以下三个方面：")]),t._v(" "),n("ul",[n("li",[t._v("会话状态管理（如用户登录状态、购物车、游戏分数或其它需要记录的信息）")]),t._v(" "),n("li",[t._v("个性化设置（如用户自定义设置、主题等）")]),t._v(" "),n("li",[t._v("浏览器行为跟踪（如跟踪分析用户行为等")])])],1)}),[],!1,null,null,null);"function"==typeof o&&o(s);e.default=s.exports}}]);