(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{556:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("通过持续集成，可以让我们通过自动化手段高频率地去获取产品反馈并响应反馈的过程。iOS可持续化集成应该包含3个基本模块：")]),s._v(" "),t("ul",[t("li",[s._v("一个可以自动构建的过程，自动编译代码，可以自动分发，部署和测试")]),s._v(" "),t("li",[s._v("一个代码仓库，SVN或者Git")]),s._v(" "),t("li",[s._v("最后一个是一个持续集成的服务器")])]),s._v(" "),t("p",[s._v("在做iOS可持续化集成需要用到以下工具：bundler、fastlane、Jenkins、ipapk-server")]),s._v(" "),t("h2",{attrs:{id:"bundler"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bundler"}},[s._v("#")]),s._v(" bundler")]),s._v(" "),t("p",[s._v("bundler用于管理ruby gem的工具，我们用来管理cocoapods以及fastlane的版本号。")]),s._v(" "),t("p",[s._v("安装："),t("code",[s._v("sudo gem install -n /usr/local/bin bundler")]),s._v("\n使用：在工程的根目录下，添加Gemfile文件（也可以指定版本号）")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://gems.ruby-china.org/'")]),s._v("\ngem "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cocoapods'")]),s._v("\ngem "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fastlane'")]),s._v("\ngem "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dotenv'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#gem 'fastlane', '~>2.35.1'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("然后执行"),t("code",[s._v("bundle install")]),s._v("，执行完同时会生成一个Gemfile.lock文件，把这个文件一起添加到git中管理，用这个我们可以很方便大家一起同步gem source和CocoaPods以及fastlane的版本号。")]),s._v(" "),t("h2",{attrs:{id:"fastlane"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fastlane"}},[s._v("#")]),s._v(" fastlane")]),s._v(" "),t("h3",{attrs:{id:"fastlane介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fastlane介绍"}},[s._v("#")]),s._v(" fastlane介绍")]),s._v(" "),t("p",[s._v("Github地址："),t("a",{attrs:{href:"https://github.com/fastlane/fastlane",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/fastlane/fastlane"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("fastlane是一组工具套件，让你可以定义和运行特定环境下各种部署流程的自动化，它是由fastlane提供的工具(例如snapshot/sigh/deliver等)以及各种第三方工具(例如cocoapods/xctool等)连接在一起组成的，可以提供一个运行良好的可持续部署流程。如下图，在Test / TestFilght Beta /Appstore 这些不同的环境下，运行的部署流程是不一样的。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/assets/img/2017/fastlane.jpg",alt:"fastlane"}})]),s._v(" "),t("p",[s._v("fastlane提供的各种工具：")]),s._v(" "),t("ul",[t("li",[s._v("deliver: 上传截图, 元数据, app应用程序到App Store")]),s._v(" "),t("li",[s._v("supply: 上传Android app应用程序和元数据到Google Play")]),s._v(" "),t("li",[s._v("snapshot: 自动捕获iOS app应用程序本地截图")]),s._v(" "),t("li",[s._v("screengrab: 自动捕获Android app应用程序本地截图")]),s._v(" "),t("li",[s._v("frameit: 快速截屏并将截屏放入设备中")]),s._v(" "),t("li",[s._v("pem: 自动生成和更新推送通知配置文件")]),s._v(" "),t("li",[s._v("sigh: 开发证书和描述文件下载")]),s._v(" "),t("li",[s._v("produce: 使用命令行在iTunes Connect上创建新的app和开发入口")]),s._v(" "),t("li",[s._v("cert: 自动创建和配置iOS代码签名证书")]),s._v(" "),t("li",[s._v("spaceship: Ruby 库访问 Apple开发者中心和 iTunes Connect")]),s._v(" "),t("li",[s._v("pilot: 最好的方式管理你的TestFlight 测试人员和从终端构建")]),s._v(" "),t("li",[s._v("boarding: 最简单的方式邀请你的TestFlight beta测试人员")]),s._v(" "),t("li",[s._v("gym: iOS app打包签名自动化工具")]),s._v(" "),t("li",[s._v("match: 使用Git同步你的团队证书和配置文件")]),s._v(" "),t("li",[s._v("scan: 最简单方式测试你的 iOS 和 Mac apps")])]),s._v(" "),t("h3",{attrs:{id:"fastlane安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fastlane安装"}},[s._v("#")]),s._v(" fastlane安装")]),s._v(" "),t("p",[s._v("首选确认安装最新版本的Xcode command line，安装过最新的XCode，就会携带安装最新的Xcode command line，或者使用一下命令：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("xcode-select --install\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("安装方法")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("Homebrew")]),s._v(" "),t("th",[s._v("Installer Script")]),s._v(" "),t("th",[s._v("Rubygems")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("macOS")]),s._v(" "),t("td",[s._v("macOS")]),s._v(" "),t("td",[s._v("macOS or Linux with Ruby 2.0.0 or above")])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("brew cask install fastlane")])]),s._v(" "),t("td",[t("a",{attrs:{href:"https://download.fastlane.tools",target:"_blank",rel:"noopener noreferrer"}},[s._v("Download the zip file"),t("OutboundLink")],1),s._v(" Then double click on the "),t("code",[s._v("install")]),s._v(" script (or run it in a terminal window).")]),s._v(" "),t("td",[t("code",[s._v("sudo gem install fastlane -NV")])])])])]),s._v(" "),t("h4",{attrs:{id:"相关教程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#相关教程"}},[s._v("#")]),s._v(" 相关教程")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.raywenderlich.com/136168/fastlane-tutorial-getting-started-2",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.raywenderlich.com/136168/fastlane-tutorial-getting-started-2"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.fastlane.tools/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.fastlane.tools/"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"fastlane基本使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fastlane基本使用"}},[s._v("#")]),s._v(" fastlane基本使用")]),s._v(" "),t("h3",{attrs:{id:"fastlane-init"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fastlane-init"}},[s._v("#")]),s._v(" fastlane init")]),s._v(" "),t("p",[s._v("此命令会要去输入Apple ID，fastlane会根据提供的信息自动生成配置文件Appfile，Fastfile")]),s._v(" "),t("p",[s._v("AppleId 有二次验证的话，需要在为apple id设置 application specific password。")]),s._v(" "),t("ul",[t("li",[s._v("访问地址：appleid.apple.com/account/manage")]),s._v(" "),t("li",[s._v("生成一个新的 application specific password")]),s._v(" "),t("li",[s._v('在Fastfile文件中或者.env文件中配置环境变量 FASTLANE_APPLE_APPLICATION_SPECIFIC_PASSWORD = "xxxxxx"')])]),s._v(" "),t("h3",{attrs:{id:"import-fastfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#import-fastfile"}},[s._v("#")]),s._v(" import fastfile")]),s._v(" "),t("p",[s._v("在仓库： "),t("a",{attrs:{href:"https://github.com/wanyakun/fastlane",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/wanyakun/fastlane"),t("OutboundLink")],1),s._v(" 中存放了基本的通用fastfile和Action，在使用的时候可以使用import的方式来使用。下面举例说明：")]),s._v(" "),t("p",[t("strong",[s._v("发布组件")])]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("import_from_git"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://github.com/wanyakun/fastlane.git'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'master'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nfastlane_version "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2.37.0"')]),s._v("\n\ndefault_platform "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":ios")]),s._v("\n\nplatform "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":ios")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\tlane "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":publish")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n\t\tversion "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\t\tyk_component_release_static_lib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\tversion"),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\tproject"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'XXXBIZCommon'")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[t("strong",[s._v("发布测试App")])]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("import_from_git"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://github.com/wanyakun/fastlane.git'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'master'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nfastlane_version "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2.37.0"')]),s._v("\n\ndefault_platform "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":ios")]),s._v("\n\nplatform "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":ios")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  \n  desc "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"public a adhoc beta app to testflight"')]),s._v("\n  lane "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":adhoc")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n    fastlane_require "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dotenv'")]),s._v("\n\n    unlock_keychain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n      path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ENV")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MAC_KEYCHAIN_PATH'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      password"),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":ENV")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MAC_USER_PASSWORD'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    xcodeproj "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./Demo/Demo.xcodeproj'")]),s._v("\n    scheme "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Demo'")]),s._v("\n\n    build_number "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":build_number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unless")]),s._v(" build_number\n      build "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" get_build_number"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xcodeproj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" xcodeproj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("to_i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n      build_number "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" build"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("to_s\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n    yk_app_build"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n       app_identifier"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'com.aioser.Demo'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       app_extension_identifier"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'com.aioser.Demo.NotificationServiceExtension'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       scheme"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Demo'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       configuration"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'debug'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       derived_data_path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'derivedData'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       output_directory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'output'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       output_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Demo.ipa'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       build_number"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" build_number"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       xcodeproj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" xcodeproj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       testflight"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       use_match"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       manual_publish"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       pid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       cer_git_url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" xxxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       cer_git_branch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'master'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       ipapkserver_ip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'192.168.199.100'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       ipapkserver_port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1234")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br")])]),t("h3",{attrs:{id:"使用match"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用match"}},[s._v("#")]),s._v(" 使用Match")]),s._v(" "),t("p",[s._v("Match用于使用git同步证书、provisioning profile文件，使用"),t("code",[s._v("fastlane match init")]),s._v(" 命令会创建Matchfile文件，并要求输入一些配置。")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("git_url "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/wanyakun/fastlane.git"')]),s._v("\n\ntype "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"adhoc"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The default type, can be: appstore, adhoc, enterprise or development")]),s._v("\n\napp_identifier "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.aioser.Demo"')]),s._v("\n\nusername "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"wanyakun@vip.qq.com"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Your Apple Developer Portal username")]),s._v("\n\ngit_branch "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"plateform"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("配置完后可以通过以下命令自动同步证书和profile文件。")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("fastlane match development\n\nfastlane match appstore\n\nfastlane match adhoc\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("也可以通过此命令注册新的设备，废弃证书和provisioning profile等。\n更多信息参考："),t("a",{attrs:{href:"https://github.com/fastlane/fastlane/blob/master/match/README.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/fastlane/fastlane/blob/master/match/README.md"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"使用cert和sigh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用cert和sigh"}},[s._v("#")]),s._v(" 使用cert和sigh")]),s._v(" "),t("p",[s._v("如果不实用match，可以直接使用cert和sigh两个action")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n cert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ENV")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'FASTLANE_USER'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n sigh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ENV")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'FASTLANE_USER'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" app_identifier"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" app_identifier"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" adhoc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rescue")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" e\n puts e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"env"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#env"}},[s._v("#")]),s._v(" .env")]),s._v(" "),t("p",[s._v("配置一些环境变量，可以根据不同的环境配置不同的环境变量文件如：.env.adhoc、.env.development、env.appstore，这些文件是隐藏的。")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("APP_IDENTIFIER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.aioser.Demo"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#苹果开发者账号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FASTLANE_USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"wanyakun@vip.qq.com"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#证书仓库解密密码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MATCH_PASSWORD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123.com"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开通二次验证后，苹果开发者账号的Special password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FASTLANE_APPLE_APPLICATION_SPECIFIC_PASSWORD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nvby-npho-sesg-whim"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#team id")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEVELOPMENT_TEAM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4V78YDRYZW"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Profile Name")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PROVISIONING_PROFILE_SPECIFIER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"match AdHoc com.aioser.Demo"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#codesigning_identity")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CODESIGNING_IDENTITY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"iPhone Distribution: Shanghai XXX XXX Information Services Co.,Ltd. (4D78ZDRYZW)"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Mac user password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MAC_USER_PASSWORD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123.com"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#keychain path")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MAC_KEYCHAIN_PATH")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"login.keychain-db"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("更多封装好的用法参照："),t("a",{attrs:{href:"https://github.com/wanyakun/fastlane",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/wanyakun/fastlane"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jenkins"}},[s._v("#")]),s._v(" Jenkins")]),s._v(" "),t("p",[s._v("Jenkins配置比较简单，网上教程非常多。")]),s._v(" "),t("p",[s._v("针对我们的项目，由于已经使用了fastlane，所以不需要进行其他证书、profile、login.keychain等配置。只需要配置好git地址，在构建步骤中添加Execute shell")]),s._v(" "),t("p",[s._v("由于测试需要，目前构建默认全是Debug包，也可以在项目中的fastfile中配置Configration为Release")]),s._v(" "),t("p",[s._v("构建Debug包并上传到内测分发系统：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash -l")]),s._v("\nfastlane yk_app_build build_number:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BUILD_NUMBER}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("构建Debug包并上传到TestFlight，若上传到TestFlight，只需要增加参数 "),t("code",[s._v("testflight: true")]),s._v(" 即可。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash -l")]),s._v("\nfastlane yk_app_build build_number:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BUILD_NUMBER}")]),s._v(" testflight: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[s._v("#")]),s._v(" 常见问题")]),s._v(" "),t("h3",{attrs:{id:"命令行找不到scheme问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令行找不到scheme问题"}},[s._v("#")]),s._v(" 命令行找不到scheme问题")]),s._v(" "),t("p",[s._v("直接拉取代码到本地之后，通过命令xcodebuild -list找不到scheme（通过xcode打开后即可找到）")]),s._v(" "),t("p",[s._v("由于需要通过Jenkins进行持续构建，拉取代码后必须通过命令行打包，因此手动打开xcode显然不现实。解决方法如下：")]),s._v(" "),t("ul",[t("li",[s._v("事先通过xcode打开工程，通过Scheme > Manage Schemes ，将scheme设置为shared：")]),s._v(" "),t("li",[s._v("将生成的文件xx.xcodeproj/xcshareddata提交到代码版本库。")]),s._v(" "),t("li",[s._v("通过Jenkins等工具拉取代码之后，即可找到scheme")])]),s._v(" "),t("h3",{attrs:{id:"phasescriptexecution-cp-embed-pods-frameworks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#phasescriptexecution-cp-embed-pods-frameworks"}},[s._v("#")]),s._v(" PhaseScriptExecution [CP]\\ Embed\\ Pods\\ Frameworks")]),s._v(" "),t("p",[s._v("钥匙串秘钥访问权限问题，修改访问控制为“允许所有应用程序访问此项目”")]),s._v(" "),t("h3",{attrs:{id:"jenkins执行pod-repo-udpate-私有库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jenkins执行pod-repo-udpate-私有库"}},[s._v("#")]),s._v(" Jenkins执行pod repo udpate 私有库")]),s._v(" "),t("p",[s._v("当我们在Jenkins中执行shell命令来update私有库的时候，或者match的时候，需要使用到keychain中的用户名和密码，会出现找不到UserName，这是因为用户名和密码保存在login keychain中。这个时候只需要unlock login keychain才可以，找到"),t("code",[s._v("~/Library/Keychains/")]),s._v("目录下login.keychain或者login.keychain-db，在before_all中添加")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("    unlock_keychain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"login.keychain-db"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    password"),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":ENV")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MAC_USER_PASSWORD'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("其中MAC_USER_PASSWORD为.env中配置的Mac登录用户的密码。")]),s._v(" "),t("h3",{attrs:{id:"code-signing-is-required-for-product-type-application-in-sdk-ios-10-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#code-signing-is-required-for-product-type-application-in-sdk-ios-10-3"}},[s._v("#")]),s._v(" Code signing is required for product type 'Application' in SDK 'iOS 10.3'")]),s._v(" "),t("p",[s._v("这种问题一般是Xcode中签名配置问题，或者XCode中没有登录开发者账号。")]),s._v(" "),t("h3",{attrs:{id:"error-exportarchive-no-teamid-specified-and-no-team-id-found-in-the-archive"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#error-exportarchive-no-teamid-specified-and-no-team-id-found-in-the-archive"}},[s._v("#")]),s._v(" error: exportArchive: No 'teamID' specified and no team ID found in the archive")]),s._v(" "),t("p",[s._v("这个错误是在Jenkins中执行fastlane命令是遇到的。")]),s._v(" "),t("p",[s._v("在命令行或者Xcode进行Archive的时候，可以查看.xcarchive文件，SigningIdentity的值为我们在Xcode中配置的值，或者是通过fastlanefile中配置的值。")]),s._v(" "),t("p",[s._v("而在Jenkins中配置这个命令后，会出现上面的错误，同样的，查看.xcarchive文件，发现SigningIdentity的值为(unavailable)，导致在export的时候出现错误。")]),s._v(" "),t("p",[t("strong",[s._v("根本原因是")]),s._v("：Apple Worldwide Developer Relations Certification Authority证书不在system keychain中，将其添加到system keychain中即可")]),s._v(" "),t("h3",{attrs:{id:"testflight"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#testflight"}},[s._v("#")]),s._v(" TestFlight")]),s._v(" "),t("p",[s._v("TestFlight必须使用发布证书、Appstore的profile，使用Adhoc无法进行testing")]),s._v(" "),t("p",[s._v("Because your CI machine will not be able to prompt you for your two-step or two-factor auth information, you also need to generate a login session for your CI machine in advance. You can get this by running:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("fastlane spaceauth -u wanyakun@vip.qq.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("This will generate a token you can set using the FASTLANE_SESSION environment variable on your CI system.")])])}),[],!1,null,null,null);a.default=e.exports}}]);