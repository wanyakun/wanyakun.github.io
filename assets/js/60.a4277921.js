(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{569:function(t,r,_){"use strict";_.r(r);var a=_(4),e=function(t){t.options.__data__block__={mermaid_382ee200:"sequenceDiagram\n  participant C as 发送端\n  participant S as 接受器\n  C->>S: 标有SYN的数据包发给你了\n  S->>C: 明白,我收到你发给我的数据包了<br />(并发送标有SYN/ACK的数据包了)\n  C->>S: 明白（发送标有ACK的数据包）\n"}},v=Object(a.a)({},(function(){var t=this,r=t.$createElement,_=t._self._c||r;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"概述"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),_("p",[t._v("从输入 URL到回车后发生的行为如下：")]),t._v(" "),_("ul",[_("li",[t._v("URL解析")]),t._v(" "),_("li",[t._v("DNS查询")]),t._v(" "),_("li",[t._v("TCP连接")]),t._v(" "),_("li",[t._v("HTTP请求")]),t._v(" "),_("li",[t._v("响应请求")]),t._v(" "),_("li",[t._v("页面渲染")])]),t._v(" "),_("h2",{attrs:{id:"详细过程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#详细过程"}},[t._v("#")]),t._v(" 详细过程")]),t._v(" "),_("h3",{attrs:{id:"url解析"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#url解析"}},[t._v("#")]),t._v(" URL解析")]),t._v(" "),_("p",[t._v("首先判断你输入的是一个合法的URL 还是一个待搜索的关键词，并且根据你输入的内容进行对应操作"),_("br"),t._v("\nURL的解析第过程中的第一步，一个url的结构解析如下：")]),t._v(" "),_("p",[_("img",{attrs:{src:"/assets/img/front/explorer/url-resolve.png",alt:"url-resolve"}})]),t._v(" "),_("h3",{attrs:{id:"dns查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dns查询"}},[t._v("#")]),t._v(" DNS查询")]),t._v(" "),_("p",[t._v("参考："),_("RouterLink",{attrs:{to:"/front/network/dns.html"}},[t._v("DNS完整的查询过程")])],1),t._v(" "),_("p",[t._v("整个过程如下：")]),t._v(" "),_("p",[_("img",{attrs:{src:"/assets/img/front/network/dns-lookup.png",alt:"lookup"}})]),t._v(" "),_("p",[t._v("最终，获取到了域名对应的目标服务器IP地址")]),t._v(" "),_("h3",{attrs:{id:"tcp连接"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tcp连接"}},[t._v("#")]),t._v(" TCP连接")]),t._v(" "),_("p",[t._v("tcp是一种面向有连接的传输层协议"),_("br"),t._v("\n在确定目标服务器服务器的IP地址后，则经历三次握手建立TCP连接")]),t._v(" "),_("Mermaid",{attrs:{id:"mermaid_382ee200",graph:t.$dataBlock.mermaid_382ee200}}),_("h3",{attrs:{id:"发送http请求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#发送http请求"}},[t._v("#")]),t._v(" 发送HTTP请求")]),t._v(" "),_("p",[t._v("当建立tcp连接之后，就可以在这基础上进行通信，浏览器发送 http 请求到目标服务器"),_("br"),t._v("\n请求的内容包括：")]),t._v(" "),_("ul",[_("li",[t._v("请求行")]),t._v(" "),_("li",[t._v("请求头")]),t._v(" "),_("li",[t._v("请求主体")])]),t._v(" "),_("p",[_("img",{attrs:{src:"/assets/img/front/explorer/http-request.png",alt:"http-request"}})]),t._v(" "),_("h3",{attrs:{id:"响应请求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#响应请求"}},[t._v("#")]),t._v(" 响应请求")]),t._v(" "),_("p",[t._v("当服务器接收到浏览器的请求之后，就会进行逻辑操作，处理完成之后返回一个HTTP响应消息，包括：")]),t._v(" "),_("ul",[_("li",[t._v("状态行")]),t._v(" "),_("li",[t._v("响应头")]),t._v(" "),_("li",[t._v("响应正文")])]),t._v(" "),_("p",[_("img",{attrs:{src:"/assets/img/front/explorer/http-response.png",alt:"http-response"}})]),t._v(" "),_("p",[t._v("在服务器响应之后，由于现在http默认开启长连接keep-alive，当页面关闭之后，tcp链接则会经过四次挥手完成断开")]),t._v(" "),_("h3",{attrs:{id:"页面渲染"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#页面渲染"}},[t._v("#")]),t._v(" 页面渲染")]),t._v(" "),_("p",[t._v("当浏览器接收到服务器响应的资源后，首先会对资源进行解析：")]),t._v(" "),_("ul",[_("li",[t._v("查看响应头的信息，根据不同的指示做对应处理，比如重定向，存储cookie，解压gzip，缓存资源等等")]),t._v(" "),_("li",[t._v("查看响应头的 Content-Type的值，根据不同的资源类型采用不同的解析方式")])]),t._v(" "),_("p",[t._v("关于页面的渲染过程如下：")]),t._v(" "),_("ul",[_("li",[t._v("解析HTML，构建 DOM 树")]),t._v(" "),_("li",[t._v("解析 CSS ，生成 CSS 规则树")]),t._v(" "),_("li",[t._v("合并 DOM 树和 CSS 规则，生成 render 树")]),t._v(" "),_("li",[t._v("布局 render 树（ Layout / reflow ），负责各元素尺寸、位置的计算")]),t._v(" "),_("li",[t._v("绘制 render 树（ paint ），绘制页面像素信息")]),t._v(" "),_("li",[t._v("浏览器会将各层的信息发送给 GPU，GPU 会将各层合成（ composite ），显示在屏幕上")])]),t._v(" "),_("p",[_("img",{attrs:{src:"/assets/img/front/explorer/render.png",alt:"render"}})])],1)}),[],!1,null,null,null);"function"==typeof e&&e(v);r.default=v.exports}}]);